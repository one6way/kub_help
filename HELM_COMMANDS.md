# üé° Helm Commands - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–û—Å–Ω–æ–≤—ã Helm](#–æ—Å–Ω–æ–≤—ã-helm)
- [–†–∞–±–æ—Ç–∞ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ä—Ç–∞–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—á–∞—Ä—Ç–∞–º–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Ä–µ–ª–∏–∑–∞–º–∏)
- [–®–∞–±–ª–æ–Ω—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è](#—à–∞–±–ª–æ–Ω—ã-–∏-–∑–Ω–∞—á–µ–Ω–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–æ—Ç–ª–∞–¥–∫–∞)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-—Ç–µ—Ö–Ω–∏–∫–∏)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ CI/CD](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–∏-cicd)
- [Helm –≤ –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö](#helm-–≤-–æ–±–ª–∞—á–Ω—ã—Ö-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö)
- [GitOps –∏ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#gitops-–∏-cicd-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è-–æ—Ç–ª–∞–¥–∫–∞)
- [–ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏](#–º–∏–≥—Ä–∞—Ü–∏—è-–º–µ–∂–¥—É-–≤–µ—Ä—Å–∏—è–º–∏)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–ø–ª–∞–≥–∏–Ω–æ–≤)
- [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–º–µ—Ç—Ä–∏–∫–∏)
- [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã](#–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-—Ä–µ—Å—É—Ä—Å—ã)

## üöÄ –û—Å–Ω–æ–≤—ã Helm

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Helm
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Homebrew (macOS)
brew install helm

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
helm version

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Helm (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
helm init
```

### üîç –ü–æ–∏—Å–∫ —á–∞—Ä—Ç–æ–≤
```bash
# –ü–æ–∏—Å–∫ —á–∞—Ä—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
helm search repo nginx

# –ü–æ–∏—Å–∫ –≤ Artifact Hub
helm search hub wordpress

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ —á–∞—Ä—Ç–∞
helm search repo nginx --versions
```

## üìö –†–∞–±–æ—Ç–∞ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
helm repo add bitnami https://charts.bitnami.com/bitnami

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
helm repo update

# –°–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
helm repo list

# –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
helm repo remove bitnami

# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
helm repo index
```

### üîÑ –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
mkdir helm-repo && cd helm-repo

# –°–æ–∑–¥–∞–Ω–∏–µ index.yaml
helm repo index .

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.yaml —Å –Ω–æ–≤—ã–º–∏ —á–∞—Ä—Ç–∞–º–∏
helm repo index . --url https://example.com/charts
```

## üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ä—Ç–∞–º–∏

### üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ä—Ç–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ä—Ç–∞
helm create mychart

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–∞—Ä—Ç–∞
mychart/
  Chart.yaml          # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞—Ä—Ç–∞
  values.yaml         # –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  charts/             # –ó–∞–≤–∏—Å–∏–º—ã–µ —á–∞—Ä—Ç—ã
  templates/          # –®–∞–±–ª–æ–Ω—ã Kubernetes
  templates/NOTES.txt # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```

### üìù –†–∞–±–æ—Ç–∞ —Å —á–∞—Ä—Ç–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —á–∞—Ä—Ç–∞
helm lint mychart

# –£–ø–∞–∫–æ–≤–∫–∞ —á–∞—Ä—Ç–∞
helm package mychart

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —á–∞—Ä—Ç–∞
helm pull bitnami/wordpress --untar

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —á–∞—Ä—Ç–∞
helm show readme bitnami/wordpress
helm show values bitnami/wordpress
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Ä—Ç–æ–≤
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Ä—Ç–∞
helm install my-release bitnami/wordpress

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
helm install my-release bitnami/wordpress -f values.yaml

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∑–Ω–∞—á–µ–Ω–∏–π
helm install my-release bitnami/wordpress --set wordpressUsername=admin

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
helm install my-release bitnami/wordpress --wait
```

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
helm upgrade my-release bitnami/wordpress

# –û—Ç–∫–∞—Ç —Ä–µ–ª–∏–∑–∞
helm rollback my-release 1

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
helm upgrade --install my-release bitnami/wordpress

# –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä–µ–ª–∏–∑–∞
helm history my-release
```

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞–º–∏

### üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ª–∏–∑–∞—Ö
```bash
# –°–ø–∏—Å–æ–∫ —Ä–µ–ª–∏–∑–æ–≤
helm list

# –°—Ç–∞—Ç—É—Å —Ä–µ–ª–∏–∑–∞
helm status my-release

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ —Ä–µ–ª–∏–∑–∞
helm get manifest my-release

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–µ–ª–∏–∑–∞
helm get values my-release
```

### üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
helm uninstall my-release

# –£–¥–∞–ª–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏
helm uninstall my-release --keep-history

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–ª–∏–∑–æ–≤
helm uninstall $(helm list -q)
```

## üìù –®–∞–±–ª–æ–Ω—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è

### üé® –†–∞–±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
helm template my-release bitnami/wordpress

# –û—Ç–ª–∞–¥–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
helm template my-release bitnami/wordpress --debug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
helm template my-release bitnami/wordpress -s templates/deployment.yaml
```

### ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
helm show values bitnami/wordpress

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
helm get values my-release

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
helm upgrade my-release bitnami/wordpress --reuse-values --set service.type=NodePort
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Ä—Ç–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
helm test my-release

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
helm lint mychart

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
helm install my-release bitnami/wordpress --dry-run
```

### üêõ –û—Ç–ª–∞–¥–∫–∞
```bash
# –û—Ç–ª–∞–¥–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
helm install my-release bitnami/wordpress --debug --dry-run

# –û—Ç–ª–∞–¥–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
helm template mychart --debug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
helm get manifest my-release
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞
helm secrets encrypt values.yaml

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–µ–∫—Ä–µ—Ç–∞
helm secrets decrypt values.yaml

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
helm secrets install my-release bitnami/wordpress -f secrets.yaml
```

### üìú –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
helm cert create

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
helm cert verify

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
helm cert renew
```

## üéì –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏

### üîÑ –•—É–∫–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ pre-install —Ö—É–∫–∞
annotations:
  "helm.sh/hook": pre-install

# –°–æ–∑–¥–∞–Ω–∏–µ post-install —Ö—É–∫–∞
annotations:
  "helm.sh/hook": post-install

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–º —Ö—É–∫–æ–≤
annotations:
  "helm.sh/hook-weight": "5"
```

### üéØ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
helm dependency update mychart

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
helm dependency build mychart

# –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
helm dependency list mychart
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ CI/CD

### üöÄ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ CI
helm lint mychart
helm template mychart
helm test my-release

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
helm upgrade --install my-release mychart --wait

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
helm status my-release -o json
```

### üì¶ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
```bash
# –£–ø–∞–∫–æ–≤–∫–∞ –¥–ª—è CI
helm package mychart --version $(git describe --tags)

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
helm push mychart-0.1.0.tgz oci://registry.example.com/charts

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
helm pull oci://registry.example.com/charts/mychart --version 0.1.0
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

### üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞–º–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞
helm plugin install https://github.com/helm/helm-2to3

# –°–ø–∏—Å–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤
helm plugin list

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞
helm plugin update 2to3

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞
helm plugin uninstall 2to3
```

### üõ†Ô∏è –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã
```bash
# Helm Secrets
helm plugin install https://github.com/jkroepke/helm-secrets

# Helm Diff
helm plugin install https://github.com/databus23/helm-diff

# Helm Monitor
helm plugin install https://github.com/ContainerSolutions/helm-monitor
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### üìã –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —á–∞—Ä—Ç–æ–≤
```bash
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
charts/
  ‚îú‚îÄ‚îÄ base/        # –ë–∞–∑–æ–≤—ã–µ —á–∞—Ä—Ç—ã
  ‚îú‚îÄ‚îÄ apps/        # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚îî‚îÄ‚îÄ infra/       # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —á–∞—Ä—Ç—ã

# –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
Chart.yaml:
  version: 1.2.3   # –í–µ—Ä—Å–∏—è —á–∞—Ä—Ç–∞
  appVersion: 2.0.0 # –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
helm lint mychart
helm template mychart
kubectl apply --dry-run=client -f <(helm template mychart)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π
helm install --dry-run --debug mychart
```

## ‚òÅÔ∏è Helm –≤ –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö

### üåê AWS EKS
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AWS CLI –∏ kubectl
aws eks update-kubeconfig --name cluster-name --region region

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AWS EKS —á–∞—Ä—Ç–æ–≤
helm repo add eks https://aws.github.io/eks-charts
helm repo update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AWS Load Balancer Controller
helm install aws-load-balancer-controller eks/aws-load-balancer-controller \
  -n kube-system \
  --set clusterName=cluster-name

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AWS EBS CSI Driver
helm install aws-ebs-csi-driver eks/aws-ebs-csi-driver \
  -n kube-system

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AWS CloudWatch Agent
helm install cloudwatch eks/aws-cloudwatch-metrics \
  -n amazon-cloudwatch
```

### üåä Azure AKS
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ AKS
az aks get-credentials --resource-group myResourceGroup --name myAKSCluster

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AGIC (Application Gateway Ingress Controller)
helm repo add application-gateway-kubernetes-ingress \
  https://appgwingress.blob.core.windows.net/ingress-azure-helm-package/
helm install ingress-azure \
  -f helm-config.yaml \
  application-gateway-kubernetes-ingress/ingress-azure

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Azure Monitor
helm install azure-monitor \
  --namespace monitoring \
  azure/azure-monitor-containers

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Azure Service Operator
helm repo add azure-service-operator \
  https://raw.githubusercontent.com/Azure/azure-service-operator/master/charts
helm install aso azure-service-operator/azure-service-operator \
  --namespace azure-service-operator \
  --create-namespace
```

### üåé Google GKE
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GKE
gcloud container clusters get-credentials cluster-name --region region

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Google Cloud Monitoring
helm install prometheus-operator stable/prometheus-operator \
  --set prometheusOperator.createCustomResource=false

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Cloud Storage CSI Driver
helm install csi-driver \
  https://raw.githubusercontent.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver/master/deploy/helm/charts/gcp-compute-persistent-disk-csi-driver

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GKE Ingress Controller
helm install ingress-nginx ingress-nginx/ingress-nginx \
  --set controller.service.loadBalancerIP=YOUR_STATIC_IP
```

## üîÑ GitOps –∏ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### üö¢ ArgoCD
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ArgoCD
helm repo add argo https://argoproj.github.io/argo-helm
helm install argocd argo/argo-cd \
  --namespace argocd \
  --create-namespace

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ ArgoCD
cat <<EOF | kubectl apply -f -
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/my-org/my-app
    targetRevision: HEAD
    path: helm
  destination:
    server: https://kubernetes.default.svc
    namespace: my-app
EOF

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
argocd app sync my-app

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
argocd app get my-app
```

### ‚ö° Flux CD
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Flux
helm repo add fluxcd https://charts.fluxcd.io
helm install flux fluxcd/flux \
  --namespace flux \
  --set git.url=git@github.com:my-org/my-repo

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Helm Operator
helm install helm-operator fluxcd/helm-operator \
  --namespace flux \
  --set git.ssh.secretName=flux-git-deploy

# –°–æ–∑–¥–∞–Ω–∏–µ HelmRelease
cat <<EOF | kubectl apply -f -
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: my-release
  namespace: default
spec:
  chart:
    repository: https://charts.bitnami.com/bitnami
    name: wordpress
    version: 10.0.0
EOF

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–ª–∏–∑–∞
kubectl describe helmrelease my-release
```

## üîç –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞

### üêõ –û—Ç–ª–∞–¥–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
```bash
# –û—Ç–ª–∞–¥–∫–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
helm template mychart --debug --set key=value

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
helm template mychart --show-only templates/deployment.yaml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
helm template mychart --debug | grep "Release\|Chart\|Values"

# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
helm template mychart | kubectl apply --dry-run=client -f -

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Go templates
helm lint mychart --strict
```

### üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
time helm install myrelease mychart

# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
helm --debug install myrelease mychart 2> helm-debug.log

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —á–∞—Ä—Ç–∞
du -h mychart

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
helm dep build mychart --debug
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

### üîÄ Helm 2 to Helm 3
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ 2to3
helm plugin install https://github.com/helm/helm-2to3

# –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
helm 2to3 move config

# –ú–∏–≥—Ä–∞—Ü–∏—è —Ä–µ–ª–∏–∑–æ–≤
helm 2to3 convert RELEASE_NAME

# –û—á–∏—Å—Ç–∫–∞ Helm 2 –¥–∞–Ω–Ω—ã—Ö
helm 2to3 cleanup
```

### üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ä—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
helm template old-chart --api-versions

# –ú–∏–≥—Ä–∞—Ü–∏—è values
helm show values old-chart > values-old.yaml
helm show values new-chart > values-new.yaml
diff values-old.yaml values-new.yaml

# –¢–µ—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
helm upgrade --dry-run --debug myrelease new-chart
```

## üîå –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

### üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞
```bash
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞
mkdir -p helm-myplugin
cd helm-myplugin
cat <<EOF > plugin.yaml
name: "myplugin"
version: "0.1.0"
usage: "My custom plugin"
description: "This is my custom Helm plugin"
command: "$HELM_PLUGIN_DIR/myplugin.sh"
hooks:
  install: "cd $HELM_PLUGIN_DIR; scripts/install.sh"
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø–ª–∞–≥–∏–Ω–∞
cat <<EOF > myplugin.sh
#!/bin/bash
echo "Hello from my plugin!"
EOF
chmod +x myplugin.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞
helm plugin install ./helm-myplugin
```

### üéÆ –ü—Ä–∏–º–µ—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤
```bash
# –ü–ª–∞–≥–∏–Ω –¥–ª—è S3
helm plugin install https://github.com/hypnoglow/helm-s3.git
helm s3 init s3://my-bucket/charts

# –ü–ª–∞–≥–∏–Ω –¥–ª—è GCS
helm plugin install https://github.com/hayorov/helm-gcs.git
helm gcs init gs://my-bucket/charts

# –ü–ª–∞–≥–∏–Ω –¥–ª—è Azure
helm plugin install https://github.com/Azure/helm-azure-storage
helm azure init azure://my-container/charts
```

## üîí –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üõ°Ô∏è RBAC –∏ PSP
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ ServiceAccount –¥–ª—è Helm
kubectl create serviceaccount tiller
kubectl create clusterrolebinding tiller \
  --clusterrole=cluster-admin \
  --serviceaccount=kube-system:tiller

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å RBAC
helm install myrelease mychart \
  --set serviceAccount.create=true \
  --set serviceAccount.name=myapp

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Pod Security Policy
cat <<EOF | kubectl apply -f -
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
  name: helm-psp
spec:
  privileged: false
  seLinux:
    rule: RunAsAny
  runAsUser:
    rule: MustRunAsNonRoot
EOF
```

### üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ plugin –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
helm plugin install https://github.com/jkroepke/helm-secrets

# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ values
helm secrets enc secrets.yaml

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ values
helm secrets install myrelease mychart -f secrets.yaml

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö values
helm secrets view secrets.yaml
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### üìä Prometheus –∏ Grafana
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
helm repo add prometheus-community \
  https://prometheus-community.github.io/helm-charts
helm install prometheus prometheus-community/kube-prometheus-stack

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
annotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "9090"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
helm upgrade prometheus prometheus-community/kube-prometheus-stack \
  --set alertmanager.config.global.slack_api_url=https://hooks.slack.com/services/XXX
```

### üì± –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana dashboards
helm install grafana grafana/grafana \
  --set dashboards.default=true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Loki
helm install loki grafana/loki-stack \
  --set grafana.enabled=true

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Jaeger
helm install jaeger jaegertracing/jaeger \
  --set provisionDataStore.cassandra=false
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Helm Documentation](https://helm.sh/docs/)
- [Helm Hub](https://artifacthub.io/)
- [Helm GitHub](https://github.com/helm/helm)

### üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [Helmfile](https://github.com/roboll/helmfile)
- [Helm Dashboard](https://github.com/komodorio/helm-dashboard)
- [Chart Testing](https://github.com/helm/chart-testing)

### üë• –°–æ–æ–±—â–µ—Å—Ç–≤–æ
- [Helm Slack](https://kubernetes.slack.com/messages/helm-users)
- [CNCF Slack](https://slack.cncf.io/)
- [Helm Twitter](https://twitter.com/helmpack)
